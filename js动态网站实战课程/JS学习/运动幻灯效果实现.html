<head>
   
    <style>
        .poster,
        .wrapper {
            width: 400px;
            height: 200px;

        }

        .wrapper {
            border: 1px solid red;
            overflow: hidden;
            position: relative;
        }

        .poster {
            position: absolute;
            left: 0;
            top: 0;
        }

        .lt,
        .gt,
        .wrapper {
            font-size: 44px;
            display: inline-block;
            vertical-align: middle;
        }

        .lt,
        .gt {
            cursor: pointer;
            color: wheat;
        }
    </style>

</head>

<body>
    
    <div style=" margin: 50px auto;text-align: center;">
        <span class="lt" onclick="move(-400)">&lt;</span>
        <div class="wrapper">
            <img class="poster" src="./_src='img1'.jpg" alt="">
            <img class="poster" src="./_src='img2'.jpg" alt="">
            <img class="poster" src="./_src='img3'.jpg" alt="">
            <img class="poster" src="./_src='img4'.jpg" alt="">
        </div>
        <span class="gt" onclick="move(400)">&gt;</span>
    </div>

    <script>
        const posters = document.querySelectorAll('.wrapper .poster')
        const width = 400
        for (let i = 0; i < posters.length; i++) {
            posters[i].style.left = width * i + 'px'
        }

        // 以上是初始化
        const step = 16;
        let isMoving = false;
        function move(totalDis) {
            if (isMoving) {
                return;
            }
            
            let firsLeft = parseInt(posters[0].style.left)
            if (firsLeft === 0 && totalDis > 0) {
                // 当前展示的是第一张，不能往右移
                return;
            }
            let lastLeft = parseInt(posters[posters.length - 1].style.left)
            if (lastLeft === 0 && totalDis < 0) {
                // 当前展示最后一张，不能往左移
                return;
            }
            isMoving = true;
            const disPerStep = Math.round(totalDis / 20); // 20步运动width
            let dis = 0
            let lefts = []
            for (let i = 0; i < posters.length; i++) {
                lefts[i] = parseInt(posters[i].style.left)
            }
            let timer = setInterval(function () {
                dis += disPerStep
                if (Math.abs(dis) >= Math.abs(totalDis)) {
                    clearInterval(timer)
                    dis = totalDis
                    isMoving = false;
                }
                for (let i = 0; i < posters.length; i++) {
                    posters[i].style.left = lefts[i] + dis + 'px'
                }
            }, step)
        }

        // setInterval(function () {
        //     move(-400)
        // }, 2000)
    </script>
</body>